(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{4431:function(e,t,r){Promise.resolve().then(r.bind(r,2421)),Promise.resolve().then(r.bind(r,2899)),Promise.resolve().then(r.bind(r,6960))},6960:function(e,t,r){"use strict";r.d(t,{BackgroundProvider:function(){return l},h:function(){return i}});var n=r(7437),s=r(2265);let o=(0,s.createContext)(void 0),l=e=>{let{children:t}=e,[r,l]=(0,s.useState)(""),[i,a]=(0,s.useState)("cover"),[d,c]=(0,s.useState)("50%"),[x,u]=(0,s.useState)("50%");return(0,s.useEffect)(()=>{let e=localStorage.getItem("backgroundUrl"),t=localStorage.getItem("backgroundSize"),r=localStorage.getItem("positionX"),n=localStorage.getItem("positionY");e&&l(e),t&&a(t),r&&c(r),n&&u(n)},[]),(0,n.jsx)(o.Provider,{value:{backgroundUrl:r,setBackgroundUrl:e=>{l(e),localStorage.setItem("backgroundUrl",e)},backgroundSize:i,setBackgroundSize:e=>{a(e),localStorage.setItem("backgroundSize",e)},positionX:d,setPositionX:e=>{c(e),localStorage.setItem("positionX",e)},positionY:x,setPositionY:e=>{u(e),localStorage.setItem("positionY",e)}},children:t})},i=()=>{let e=(0,s.useContext)(o);if(!e)throw Error("useBackground must be used within a BackgroundProvider");return e}},5962:function(e,t,r){"use strict";r.d(t,{R:function(){return c},u:function(){return d}});var n=r(7437),s=r(2265),o=r(8104),l=r(9842),i=r(2421);let a=(0,s.createContext)(void 0),d=()=>{let e=(0,s.useContext)(a);if(!e)throw Error("useClassContext must be used within a ClassProvider");return e},c=e=>{let{children:t}=e,{currentUser:r}=(0,i.a)(),[d,c]=(0,s.useState)({}),[x,u]=(0,s.useState)({});(0,s.useEffect)(()=>{if(!r)return;let e=(0,l.JU)(o.R,"users/users/".concat(r.email,"/myclass")),t=(0,l.cf)(e,e=>{if(e.exists()){let t=e.data();c(Object.fromEntries(Object.entries(t).filter(e=>{let[t,r]=e;return r.favorite}).map(e=>{let[t,r]=e;return[t,r]}))),u(Object.fromEntries(Object.entries(t).filter(e=>{let[t,r]=e;return r.myclass}).map(e=>{let[t,r]=e;return[t,r]})))}else c({}),u({})});return()=>t()},[r]);let m=async e=>{if(!r)return;let t=(0,l.JU)(o.R,"class/class/".concat(e,"/detail")),n=await (0,l.QT)(t);if(n.exists()){var s,i;let{cN:t,ins:a,dWk:u,prd:m,trm:h,loc:p}=n.data(),f=!(null===(s=d[e])||void 0===s?void 0:s.favorite),g={cN:t,ins:a,dWk:u,prd:m,trm:h,loc:p,favorite:f,myclass:(null===(i=x[e])||void 0===i?void 0:i.myclass)||!1};if(f||g.myclass){f?c(t=>({...t,[e]:g})):c(t=>{let{[e]:r,...n}=t;return n});let t=(0,l.JU)(o.R,"users/users/".concat(r.email,"/myclass"));await (0,l.pl)(t,{[e]:g},{merge:!0})}else{c(t=>{let{[e]:r,...n}=t;return n});let t=(0,l.JU)(o.R,"users/users/".concat(r.email,"/myclass"));await (0,l.pl)(t,{[e]:(0,l.AK)()},{merge:!0})}}else console.error("Document does not exist")},h=async e=>{if(!r)return;let t=(0,l.JU)(o.R,"class/class/".concat(e,"/detail")),n=await (0,l.QT)(t);if(n.exists()){var s,i;let{cN:t,ins:a,dWk:c,prd:m,trm:h,loc:p}=n.data(),f=!(null===(s=x[e])||void 0===s?void 0:s.myclass),g={cN:t,ins:a,dWk:c,prd:m,trm:h,loc:p,favorite:(null===(i=d[e])||void 0===i?void 0:i.favorite)||!1,myclass:f};if(g.favorite||f){f?u(t=>({...t,[e]:g})):u(t=>{let{[e]:r,...n}=t;return n});let t=(0,l.JU)(o.R,"users/users/".concat(r.email,"/myclass"));await (0,l.pl)(t,{[e]:g},{merge:!0})}else{u(t=>{let{[e]:r,...n}=t;return n});let t=(0,l.JU)(o.R,"users/users/".concat(r.email,"/myclass"));await (0,l.pl)(t,{[e]:(0,l.AK)()},{merge:!0})}}else console.error("Document does not exist")};return(0,n.jsx)(a.Provider,{value:{favoriteClasses:d,myClasses:x,setFavoriteClasses:c,setMyClasses:u,toggleFavorite:m,toggleMyClass:h},children:t})}},7684:function(e,t,r){"use strict";r.d(t,{U:function(){return a},a:function(){return d}});var n=r(7437),s=r(2265),o=r(8104),l=r(9842);let i=(0,s.createContext)(null),a=()=>(0,s.useContext)(i),d=e=>{let{children:t}=e,[r,a]=(0,s.useState)(null),[d,c]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{let e=o.I.currentUser;if(e){let t=e.email,r=(0,l.JU)(o.R,"users/users/".concat(t,"/detail")),n=await (0,l.QT)(r);n.exists()?a(n.data()):a(null)}c(!1)})()},[]);let x=async e=>{let t=o.I.currentUser;if(t){let r=t.email,n=(0,l.JU)(o.R,"users/users/".concat(r,"/detail"));await (0,l.pl)(n,e,{merge:!0}),a(e)}};return(0,n.jsx)(i.Provider,{value:{profile:r,updateProfile:x,loading:d},children:!d&&t})}},2421:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return a},a:function(){return d}});var n=r(7437),s=r(8104),o=r(5735),l=r(2265);let i=(0,l.createContext)(void 0),a=e=>{let{children:t}=e,[r,a]=(0,l.useState)(null),[d,c]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let e=(0,o.Aj)(s.I,e=>{a(e),c(!1)});return()=>e()},[]),(0,n.jsx)(i.Provider,{value:{currentUser:r,loading:d},children:t})},d=()=>{let e=(0,l.useContext)(i);if(void 0===e)throw Error("useAuth must be used within AuthProvider");return e}},2899:function(e,t,r){"use strict";r.d(t,{default:function(){return eV}});var n=r(7437),s=r(6463),o=r(2265),l=r(2421),i=r(1326),a=r(468),d=r(511),c=()=>(0,n.jsxs)(i.Z,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh",sx:{background:"linear-gradient(135deg, #6a11cb 0%, #2575fc 100%)",color:"#ffffff",overflow:"hidden"},children:[(0,n.jsx)(a.Z,{color:"inherit"}),(0,n.jsx)(d.Z,{variant:"h6",sx:{marginTop:"20px",fontFamily:"Noto Sans JP, sans-serif"},children:"Loading ClassGU"})]}),x=r(1733),u=r(9806),m=r(335),h=r(5349),p=r(659),f=r(7318),g=r(6557),b=r(2197),j=r(5735),v=r(851),Z=r(8104),C=r(8646),y=r(824),w=r(8784),k=r(1096),S=r(3983),F=r(385),I=r(7040),B=r(8549),W=r(9004),E=r(6548),R=r(5994),A=r(3098),P=r(6154),D=r(7684);function U(){let e=(0,C._)(["\n  0% {\n    opacity: 0;\n    transform: scale(0.8);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n"]);return U=function(){return e},e}function z(){let e=(0,C._)(["\n  0% {\n    opacity: 1;\n    transform: scale(1);\n  }\n  100% {\n    opacity: 0;\n    transform: scale(0.8);\n  }\n"]);return z=function(){return e},e}function N(){let e=(0,C._)(["\n  0% {\n    opacity: 0;\n    transform: translateY(0px);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n"]);return N=function(){return e},e}let O=[{name:"教育学部",majors:[]},{name:"地域科学部",majors:["地域政策学科","地域文化学科"]},{name:"医学部",majors:["医学科","看護学科"]},{name:"応用生物科学部",majors:["共同獣医学科","応用生命科学課程"],courses:{応用生命科学課程:["分子生命科学コース","食品生命科学コース"],共同獣医学科:["獣医コース"]}},{name:"工学部",majors:["社会基盤工学科","機械工学科","化学生命工学科","電気電子・情報工学科"],courses:{社会基盤工学科:["環境コース","防災コース"],機械工学科:["機械コース","知能機械コース"],化学生命工学科:["物質科学コース","生命科学コース"],電気電子・情報工学科:["電気電子コース","情報コース","応用物理コース"]}}],M=(0,A.F4)(U()),T=(0,A.F4)(z()),Y=(0,A.F4)(N()),L=(0,P.Z)(y.Z)({backgroundColor:"#FBE9E7",position:"relative",zIndex:1,display:"flex",flexDirection:"column",alignItems:"center",fontWeight:"bold",fontFamily:"Arial, sans-serif",padding:"16px 24px"}),J=(0,P.Z)(w.Z)({backgroundColor:"#FBE9E7",position:"relative",zIndex:1}),H=(0,P.Z)(k.Z)(e=>{let{theme:t}=e;return{"& .MuiPaper-root":{animation:"".concat(M," 0.5s ease-out"),backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"cover",position:"relative",overflow:"hidden",zIndex:0},"&.MuiDialog-exiting .MuiPaper-root":{animation:"".concat(T," 0.5s ease-out")}}}),G=(0,P.Z)(S.Z)({backgroundColor:"#FFFFFF",borderRadius:"5px"}),_=(0,P.Z)(i.Z)({display:"flex",alignItems:"center",justifyContent:"center",color:"green",animation:"".concat(Y," 0.8s ease-in-out")}),Q=(0,P.Z)(i.Z)({display:"flex",alignItems:"center",justifyContent:"center",color:"red",animation:"".concat(Y," 0.8s ease-in-out")}),K=(0,P.Z)(F.Z)({background:"#FFAB91",overflowY:"auto",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"},position:"relative",zIndex:1});var X=e=>{var t,r,s;let{open:i,onClose:a,user:c}=e,{profile:x,updateProfile:u}=(0,D.U)(),{currentUser:m}=(0,l.a)(),[p,f]=(0,o.useState)(""),[b,j]=(0,o.useState)((null==m?void 0:m.email)||""),[v,Z]=(0,o.useState)(""),[C,y]=(0,o.useState)(""),[w,k]=(0,o.useState)(""),[S,F]=(0,o.useState)(""),[A,P]=(0,o.useState)((null==x?void 0:x.photoURL)||""),[U,z]=(0,o.useState)(!1),[N,M]=(0,o.useState)(!1);(0,o.useEffect)(()=>{x&&(f(x.displayName||""),Z(x.year||""),y(x.faculty||""),k(x.department||""),F(x.course||""),P(x.photoURL||""),j((null==m?void 0:m.email)||""))},[x,m]);let T=async()=>{await u({displayName:p,email:b,year:v,faculty:C,department:w,course:S,photoURL:A}),z(!0),setTimeout(()=>{z(!1),a()},1500)},[Y,X]=(0,o.useState)(""),V=O.map(e=>(0,n.jsx)(g.Z,{value:e.name,children:e.name},e.name)),q=(null===(t=O.find(e=>e.name===C))||void 0===t?void 0:t.majors.map(e=>(0,n.jsx)(g.Z,{value:e,children:e},e)))||[],$=(null===(s=O.find(e=>e.name===C))||void 0===s?void 0:null===(r=s.courses)||void 0===r?void 0:r[w])||[];return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(H,{open:i,onClose:a,TransitionComponent:I.Z,children:[(0,n.jsxs)(L,{children:[(0,n.jsx)(d.Z,{variant:"subtitle1",align:"center",children:p}),(0,n.jsx)(h.Z,{alt:(null==m?void 0:m.displayName)||"Guest",src:A||void 0,sx:{width:56,height:56,margin:"0 auto",border:"2px solid #B0B0B0",borderRadius:"50%"}})]}),(0,n.jsxs)(K,{children:[(0,n.jsx)(G,{margin:"dense",label:"プロフィール写真 URL",fullWidth:!0,value:A,onChange:e=>{let t=e.target.value;t.length<=100?(P(t),X("")):X("URLは100文字以内にしてください")},error:!!Y,sx:{marginBottom:1,marginTop:5}}),Y&&(0,n.jsx)(d.Z,{variant:"body2",color:"error",sx:{marginTop:-3,padding:"4px 8px",backgroundColor:"#ffe6e6",borderRadius:"4px",fontSize:"0.875rem",boxShadow:"0px 1px 3px rgba(0, 0, 0, 0.1)"},children:Y}),(0,n.jsx)(G,{margin:"dense",label:"ニックネーム",fullWidth:!0,value:p,onChange:e=>f(e.target.value),sx:{marginBottom:1}}),(0,n.jsx)(G,{margin:"dense",label:"メールアドレス",fullWidth:!0,value:b,onChange:e=>j(e.target.value),disabled:!0,sx:{marginBottom:1}}),(0,n.jsxs)(B.Z,{fullWidth:!0,margin:"dense",sx:{marginBottom:1},children:[(0,n.jsx)(d.Z,{children:"学年"}),(0,n.jsxs)(W.Z,{value:v,onChange:e=>Z(e.target.value),sx:{backgroundColor:"#FFFFFF"},children:[(0,n.jsx)(g.Z,{value:"1",children:"1年生"}),(0,n.jsx)(g.Z,{value:"2",children:"2年生"}),(0,n.jsx)(g.Z,{value:"3",children:"3年生"}),(0,n.jsx)(g.Z,{value:"4",children:"4年生"}),(0,n.jsx)(g.Z,{value:"5",children:"5年生"}),(0,n.jsx)(g.Z,{value:"6",children:"6年生"})]})]}),(0,n.jsxs)(B.Z,{fullWidth:!0,margin:"dense",sx:{marginBottom:1},children:[(0,n.jsx)(d.Z,{children:"学部"}),(0,n.jsx)(W.Z,{value:C,onChange:e=>{y(e.target.value),k(""),F("")},sx:{backgroundColor:"#FFFFFF"},children:V})]}),C&&q.length>0&&(0,n.jsxs)(B.Z,{fullWidth:!0,margin:"dense",sx:{marginBottom:1},children:[(0,n.jsx)(d.Z,{children:"学科"}),(0,n.jsx)(W.Z,{value:w,onChange:e=>{k(e.target.value),F("")},sx:{backgroundColor:"#FFFFFF"},children:q})]}),w&&$.length>0&&(0,n.jsxs)(B.Z,{fullWidth:!0,margin:"dense",sx:{marginBottom:1},children:[(0,n.jsx)(d.Z,{children:"コース"}),(0,n.jsx)(W.Z,{value:S,onChange:e=>{F(e.target.value)},sx:{backgroundColor:"#FFFFFF"},children:$.map(e=>(0,n.jsx)(g.Z,{value:e,children:e},e))})]})]}),(0,n.jsxs)(J,{children:[U&&(0,n.jsx)(I.Z,{in:U,children:(0,n.jsxs)(_,{children:[(0,n.jsx)(R.Z,{style:{marginRight:"5px"}}),(0,n.jsx)(d.Z,{variant:"h6",color:"success",align:"center",children:"プロフィールが更新されました！"})]})}),N&&(0,n.jsx)(I.Z,{in:N,children:(0,n.jsxs)(Q,{children:[(0,n.jsx)(R.Z,{style:{marginRight:"5px"}}),(0,n.jsx)(d.Z,{variant:"h6",color:"error",align:"center",children:"プロフィールが既に存在します！"})]})}),(0,n.jsx)(E.Z,{onClick:a,sx:{fontWeight:400},color:"warning",children:"キャンセル"}),(0,n.jsx)(E.Z,{onClick:T,sx:{fontWeight:"bold"},color:"warning",children:"保存"})]})]})})},V=r(6960),q=r(2804),$=r(4593),ee=r(5174),et=r(8433),er=r(2960),en=r(2006),es=r(1591),eo=e=>{let{open:t,onClose:r}=e,{backgroundUrl:s,setBackgroundUrl:l,backgroundSize:a,setBackgroundSize:c,positionX:x,setPositionX:u,positionY:h,setPositionY:p}=(0,V.h)(),[f,g]=(0,o.useState)(s),[b,j]=(0,o.useState)(parseFloat(a)||100),[v,Z]=(0,o.useState)(parseFloat(x)||50),[C,y]=(0,o.useState)(parseFloat(h)||50),w=(0,er.Z)(),k=(0,q.Z)(w.breakpoints.down("sm")),F=(0,q.Z)(w.breakpoints.between("sm","md"));return((0,o.useEffect)(()=>{l(f)},[f,l]),(0,o.useEffect)(()=>{c("".concat(b,"%"))},[b,c]),(0,o.useEffect)(()=>{let e="".concat(v,"%"),t="".concat(C,"%");u(e),p(t)},[v,C,u,p]),t)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)($.Z,{open:t,sx:{zIndex:10},onClick:r}),(0,n.jsx)(en.s,{default:{x:50,y:50,width:k?300:F?400:500,height:"auto"},bounds:"window",enableResizing:!1,dragHandleClassName:"drag-handle",style:{zIndex:11,backgroundColor:"white",borderRadius:"8px",boxShadow:"0px 4px 10px rgba(0, 0, 0, 0.3)"},children:(0,n.jsxs)(i.Z,{sx:{p:4},children:[(0,n.jsxs)(i.Z,{display:"flex",justifyContent:"space-between",mb:2,children:[(0,n.jsx)(d.Z,{variant:"h6",gutterBottom:!0,children:"背景画像の設定"}),(0,n.jsx)(m.Z,{className:"drag-handle","aria-label":"move",size:"small",children:(0,n.jsx)(es.Z,{})})]}),(0,n.jsx)(S.Z,{label:"画像URL",variant:"outlined",fullWidth:!0,value:f,onChange:e=>g(e.target.value),sx:{mb:2}}),(0,n.jsxs)(d.Z,{variant:"body1",gutterBottom:!0,children:["画像サイズ (",b,"%)"]}),(0,n.jsx)(ee.ZP,{value:b,onChange:(e,t)=>j(t),"aria-labelledby":"size-slider",min:10,max:200,step:1,sx:{mb:2}}),(0,n.jsxs)(et.ZP,{container:!0,spacing:2,children:[(0,n.jsxs)(et.ZP,{item:!0,xs:6,children:[(0,n.jsxs)(d.Z,{variant:"body1",gutterBottom:!0,children:["X位置 (",v,"%)"]}),(0,n.jsx)(ee.ZP,{value:v,onChange:(e,t)=>Z(t),"aria-labelledby":"position-x-slider",min:0,max:200,step:1})]}),(0,n.jsxs)(et.ZP,{item:!0,xs:6,children:[(0,n.jsxs)(d.Z,{variant:"body1",gutterBottom:!0,children:["Y位置 (",C,"%)"]}),(0,n.jsx)(ee.ZP,{value:C,onChange:(e,t)=>y(t),"aria-labelledby":"position-y-slider",min:0,max:100,step:1})]})]}),(0,n.jsx)(E.Z,{variant:"contained",color:"primary",onClick:()=>{r()},fullWidth:!0,sx:{mt:2},children:"保存"})]})})]}):null},el=e=>{let{children:t}=e,r=(0,s.useRouter)(),[l,a]=(0,o.useState)(null),[c,C]=(0,o.useState)(!1),[y,w]=(0,o.useState)(!1),{profile:k}=(0,D.U)()||{},{backgroundUrl:S}=(0,V.h)(),F=new Date().getFullYear(),I=()=>{a(null)},B=async()=>{I();try{await (0,j.w7)(Z.I),r.push("/")}catch(e){}};return(0,n.jsxs)(i.Z,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[(0,n.jsx)(x.Z,{position:"static",sx:{background:"linear-gradient(30deg, #6a11cb 0%, #2575fc 100%)"},children:(0,n.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,n.jsx)(d.Z,{variant:"h6",component:"div",sx:{cursor:"pointer"},onClick:()=>r.push("/dashboard"),children:"ClassGU"}),(0,n.jsxs)("div",{children:[(0,n.jsx)(m.Z,{}),(0,n.jsx)(m.Z,{size:"large",edge:"end","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:e=>{a(e.currentTarget)},color:"inherit",children:(null==k?void 0:k.photoURL)?(0,n.jsx)(h.Z,{alt:k.displayName||"",src:k.photoURL}):(0,n.jsx)(v.Z,{})}),(0,n.jsxs)(p.Z,{id:"menu-appbar",anchorEl:l,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!l,onClose:I,children:[k&&(0,n.jsxs)(i.Z,{sx:{p:2,textAlign:"center"},children:[(0,n.jsx)(d.Z,{variant:"subtitle1",children:k.displayName}),(0,n.jsx)(h.Z,{alt:k.displayName||"",src:k.photoURL,sx:{width:56,height:56,margin:"0 auto"}}),(0,n.jsx)(d.Z,{variant:"body2",children:k.email})]}),(0,n.jsx)(f.Z,{}),(0,n.jsx)(g.Z,{onClick:()=>{C(!0),I()},children:"プロフィール"}),(0,n.jsx)(g.Z,{onClick:()=>{I(),r.push("/ShareManage")},children:"共有一覧"}),(0,n.jsx)(g.Z,{onClick:()=>{w(!0),I()},children:"設定"}),(0,n.jsx)(f.Z,{}),(0,n.jsx)(g.Z,{onClick:B,children:"ログアウト"})]})]})]})}),(0,n.jsx)(i.Z,{component:"main",sx:{flex:1},children:t}),(0,n.jsx)(i.Z,{component:"footer",sx:{background:"linear-gradient(10deg, #303F9F 30%, #039BE5 90%)",color:"#fff",pt:3,pb:2,position:"relative",overflow:"hidden"},children:(0,n.jsxs)(b.Z,{children:[(0,n.jsxs)(et.ZP,{container:!0,spacing:2,justifyContent:"center",children:[(0,n.jsxs)(et.ZP,{item:!0,xs:12,sm:5,children:[(0,n.jsx)(d.Z,{variant:"h6",gutterBottom:!0,children:"ClassGU"}),(0,n.jsx)(d.Z,{variant:"body2",children:"This is a learning platform for Gifu University students."})]}),(0,n.jsx)(et.ZP,{item:!0,xs:12,sm:3}),(0,n.jsxs)(et.ZP,{item:!0,xs:12,sm:4,children:[(0,n.jsx)(d.Z,{variant:"h6",gutterBottom:!0,children:"Contact"}),(0,n.jsx)(d.Z,{variant:"body2",children:"developer@sharettle.com"}),(0,n.jsx)(d.Z,{variant:"body2",children:"090-xxxx-xxxx"})]})]}),(0,n.jsx)(i.Z,{mt:5,textAlign:"center",children:(0,n.jsxs)(d.Z,{variant:"body2",sx:{opacity:.6},children:["\xa9 ",F," ClassGU by Sharettle. Developer R.M."]})})]})}),k&&(0,n.jsx)(X,{open:c,onClose:()=>{C(!1)},user:Z.I.currentUser,photoURL:k.photoURL}),(0,n.jsx)(eo,{open:y,onClose:()=>{w(!1)}})]})},ei=r(3742),ea=r(9216),ed=r(4569),ec=r(9009),ex=r(2326),eu=r(4990),em=r(2436),eh=r(4414),ep=r(6325),ef=r(9842),eg=e=>{let{open:t,onClose:r}=e,[l,a]=(0,o.useState)(""),[c,x]=(0,o.useState)([]),[u,h]=(0,o.useState)([]),[p,f]=(0,o.useState)(null),[g,b]=(0,o.useState)(null),[j,v]=(0,o.useState)({year:null,term:null,credits:null,day:null}),[C,y]=(0,o.useState)(!1),[w,k]=(0,o.useState)([]),[F,I]=(0,o.useState)([]);(0,o.useEffect)(()=>{t&&B()},[t]);let B=async()=>{let e=localStorage.getItem("classData");if(e){let t=JSON.parse(e);x(t),h(t),R(t)}else{let e=(0,ef.JU)(Z.R,"class","classmanage"),t=await (0,ef.QT)(e);if(t.exists()){let e=Object.entries(t.data()).map(e=>{let[t,r]=e;return{id:t,...r}});localStorage.setItem("classData",JSON.stringify(e)),x(e),h(e),R(e)}else console.log("No such document!")}},W=async()=>{let e=(0,ef.JU)(Z.R,"class","classmanage"),t=await (0,ef.QT)(e);if(t.exists()){let e=Object.entries(t.data()).map(e=>{let[t,r]=e;return{id:t,...r}});localStorage.setItem("classData",JSON.stringify(e)),x(e),h(e),R(e)}else console.log("No such document!")},R=e=>{k(Array.from(new Set(e.map(e=>e.dpt)))),p&&I(Array.from(new Set(e.filter(e=>e.dpt===p).map(e=>e.sCls))))},A=e=>{a(e),e.length>0?h(c.filter(t=>t.cN.toLowerCase().includes(e.toLowerCase())||t.ins.toLowerCase().includes(e.toLowerCase()))):h(c)};(0,o.useEffect)(()=>{p&&R(c)},[p]);let P=e=>{let t={...j,department:e,major:null,year:null,term:null,credits:null,day:null};f(e),b(null),v(t),N(t)},D=e=>{let t={...j,major:e,year:null,term:null,credits:null,day:null};b(e),v(t),N(t)},U=(0,s.useRouter)(),z=e=>{localStorage.setItem("selectedClassId",e),U.push("/Class")},N=e=>{let t=c;e.department&&(t=t.filter(t=>t.dpt===e.department)),e.major&&(t=t.filter(t=>t.sCls===e.major)),e.year&&(t=t.filter(t=>t.tYr===parseInt(e.year))),e.term&&(t=t.filter(t=>t.trm===e.term)),e.credits&&(t=t.filter(t=>t.crd.toString()===e.credits)),e.day&&(t=t.filter(t=>t.dWk===e.day)),l&&(t=t.filter(e=>e.cN.toLowerCase().includes(l.toLowerCase())||e.ins.toLowerCase().includes(l.toLowerCase()))),h(t)},O=(e,t)=>{let r={...j,[e]:j[e]===t?null:t};v(r),N(r)},M=async()=>{await W()},T=(e,t,r,s)=>e.map((e,o)=>(0,n.jsx)(ei.Z,{label:"".concat(e," (").concat(t[o],")"),onClick:()=>O(r,e),clickable:t[o]>0,disabled:0===t[o],sx:{backgroundColor:s===e?"#1976d2":"default",color:s===e?"white":"black","&:hover":{backgroundColor:s===e?"#1565c0":"#e0e0e0"},opacity:t[o]>0?1:.5,cursor:t[o]>0?"pointer":"default",marginBottom:"8px",padding:{xs:"0.1px 0.1px",sm:"4px 0.5px"},fontSize:{xs:"0.7rem",sm:"0.875rem"}}},e)),[Y,L]=(0,o.useState)(!1);return(0,n.jsx)(ec.Z,{open:t,onClose:r,closeAfterTransition:!0,slotProps:{backdrop:{timeout:500}},children:(0,n.jsxs)(i.Z,{sx:{width:"95%",maxWidth:1e3,mx:"auto",my:{xs:0,sm:1,md:2,lg:4},bgcolor:"white",p:2,borderRadius:2},children:[(0,n.jsxs)(i.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:0},children:[(0,n.jsx)(d.Z,{variant:"h6",sx:{fontFamily:"Roboto, sans-serif",fontWeight:"bold",color:"#2979FF",letterSpacing:"0.1em"}}),(0,n.jsx)(E.Z,{onClick:r,color:"primary",children:"閉じる"})]}),(0,n.jsx)(i.Z,{sx:{display:"flex",alignItems:"center",mb:1,justifyContent:"center"},children:(0,n.jsx)(S.Z,{placeholder:"授業または教員で検索",variant:"outlined",fullWidth:!0,value:l,onChange:e=>A(e.target.value),InputProps:{startAdornment:(0,n.jsx)(ex.Z,{position:"start",children:(0,n.jsx)(em.Z,{})}),sx:{backgroundColor:"white",borderRadius:"25px",boxShadow:"0 1px 3px rgba(32, 33, 36, 0.28)","& .MuiOutlinedInput-notchedOutline":{borderColor:"transparent",transition:"border-color 0.5s ease"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#1E88E5",transition:"border-color 0.5s ease"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#2196F3",transition:"border-color 0.5s ease"},"& .MuiOutlinedInput-root":{padding:"20px 15px",transition:"border-color 0.5s ease"}},endAdornment:(0,n.jsx)(m.Z,{onClick:()=>a(""),children:(0,n.jsx)(eh.Z,{})})}})}),(0,n.jsxs)(i.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"flex-start",mb:.5},children:[(0,n.jsx)(ed.Z,{direction:"row",spacing:1,sx:{flexWrap:"wrap",mb:.3},children:w.map(e=>{let t=c.filter(t=>t.dpt===e).length;return(0,n.jsx)(ei.Z,{label:"".concat(e," (").concat(t,")"),onClick:()=>P(e),clickable:!0,sx:{backgroundColor:p===e?"#1976d2":"default",color:p===e?"white":"black","&:hover":{backgroundColor:p===e?"#1565c0":"#e0e0e0"},marginBottom:"8px"}},e)})}),p&&(0,n.jsx)(ed.Z,{direction:"row",spacing:1,sx:{flexWrap:"wrap",mb:.5},children:(()=>{if(p){let e=F.map(e=>{let t=c.filter(t=>t.sCls===e&&t.dpt===p).length;return{major:e,count:t}});return(0,n.jsx)(n.Fragment,{children:e.map(e=>{let{major:t,count:r}=e;return(0,n.jsx)(ei.Z,{label:"".concat(t," (").concat(r,")"),onClick:()=>D(t),clickable:!0,sx:{backgroundColor:g===t?"#1976d2":"default",color:g===t?"white":"black","&:hover":{backgroundColor:g===t?"#1565c0":"#e0e0e0"},marginBottom:"8px"}},t)})})}return null})()}),(0,n.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:.1},children:[(0,n.jsx)(m.Z,{onClick:()=>{L(!Y),y(e=>!e)},sx:{alignSelf:"flex-start",mb:2,backgroundColor:C?"#1976d2":"default",color:C?"white":"black",transform:Y?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s ease-in-out","&:hover":{backgroundColor:C?"#1565c0":"#e0e0e0"}},children:(0,n.jsx)(ep.Z,{})}),(0,n.jsx)(E.Z,{onClick:()=>{v({year:null,term:null,credits:null,day:null}),f(null),b(null),h(c)},variant:"outlined",sx:{alignSelf:"flex-start",mb:0,backgroundColor:"#fff",textTransform:"none"},children:"フィルターをリセット"})]}),(()=>{let e=[1,2,3,4].map(e=>c.filter(t=>(!j.department||t.dpt===j.department)&&(!j.major||t.sCls===j.major)&&(!j.term||t.trm===j.term)&&(!j.credits||t.crd.toString()===j.credits)&&(!j.day||t.dWk===j.day)&&t.tYr===e).length),t=["前","後"].map(e=>c.filter(t=>(!j.department||t.dpt===j.department)&&(!j.major||t.sCls===j.major)&&(!j.year||t.tYr===parseInt(j.year))&&(!j.credits||t.crd.toString()===j.credits)&&(!j.day||t.dWk===j.day)&&t.trm===e).length),r=["1","1.5","2"].map(e=>c.filter(t=>(!j.department||t.dpt===j.department)&&(!j.major||t.sCls===j.major)&&(!j.year||t.tYr===parseInt(j.year))&&(!j.term||t.trm===j.term)&&(!j.day||t.dWk===j.day)&&t.crd.toString()===e).length),s=["月","火","水","木","金"].map(e=>c.filter(t=>(!j.department||t.dpt===j.department)&&(!j.major||t.sCls===j.major)&&(!j.year||t.tYr===parseInt(j.year))&&(!j.term||t.trm===j.term)&&(!j.credits||t.crd.toString()===j.credits)&&t.dWk===e).length);return(0,n.jsxs)(ea.Z,{in:C,timeout:"auto",unmountOnExit:!0,children:[(0,n.jsxs)(ed.Z,{direction:"row",alignItems:"center",spacing:.5,sx:{mb:.3},children:[(0,n.jsx)(d.Z,{variant:"subtitle2",sx:{fontSize:{xs:"0.7rem",sm:"0.9rem",md:"1rem",lg:"1.1rem"}},children:"学年:"}),(0,n.jsx)(ed.Z,{direction:"row",spacing:.5,sx:{flexWrap:"wrap"},children:T(["1","2","3","4"],e,"year",j.year)})]}),(0,n.jsxs)(ed.Z,{direction:"row",spacing:.1,alignItems:"center",sx:{mb:.3},children:[(0,n.jsx)(d.Z,{variant:"subtitle2",sx:{fontSize:{xs:"0.7rem",sm:"0.9rem",md:"1rem",lg:"1.1rem"}},children:"学期:"}),(0,n.jsx)(ed.Z,{direction:"row",spacing:.1,sx:{flexWrap:"wrap",mb:2},children:T(["前","後"],t,"term",j.term)}),(0,n.jsx)(d.Z,{variant:"subtitle2",sx:{fontSize:{xs:"0.7rem",sm:"0.9rem",md:"1rem",lg:"1.1rem"}},children:"単位数:"}),(0,n.jsx)(ed.Z,{direction:"row",spacing:.5,sx:{flexWrap:"wrap",mb:2},children:T(["1","1.5","2"],r,"credits",j.credits)})]}),(0,n.jsxs)(ed.Z,{direction:"row",spacing:.5,alignItems:"center",sx:{mb:1},children:[(0,n.jsx)(d.Z,{variant:"subtitle2",sx:{fontSize:{xs:"0.7rem",sm:"0.9rem",md:"1rem",lg:"1.1rem"}},children:"曜日:"}),(0,n.jsx)(ed.Z,{direction:"row",spacing:.5,sx:{flexWrap:"wrap",mb:2},children:T(["月","火","水","木","金"],s,"day",j.day)})]})]})})()]}),(0,n.jsxs)(i.Z,{sx:{height:{xs:"53vh",sm:"60vh",md:"60vh",lg:"450px"},overflowY:"auto",maxHeight:"90vh"},children:[u.slice(0,30).map((e,t)=>(0,n.jsx)(eu.Z,{sx:{p:.7,mb:.9,borderRadius:"8px",boxShadow:"none",transition:"box-shadow 0.3s ease",cursor:"pointer","&:hover":{boxShadow:"0 px 8px rgba(0, 0, 0, 0.1)",backgroundColor:"#f5f5f5"},backgroundColor:"#fff"},onClick:()=>z(e.id),children:(0,n.jsxs)(et.ZP,{container:!0,spacing:.5,alignItems:"center",children:[(0,n.jsx)(et.ZP,{item:!0,xs:5,children:(0,n.jsxs)(d.Z,{variant:"body1",sx:{fontSize:{xs:"11px",sm:"15px",md:"17px"},whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:"#202124"},children:[e.cN," "]})}),(0,n.jsx)(et.ZP,{item:!0,xs:3.5,children:(0,n.jsx)(d.Z,{variant:"body2",sx:{fontSize:{xs:"10px",sm:"12px",md:"14px"},whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"right",color:"#5f6368"},children:"".concat(e.tYr,"年 ").concat(e.trm,"期 ").concat(e.dWk,"曜 ").concat(e.crd,"単")})}),(0,n.jsx)(et.ZP,{item:!0,xs:3.5,children:(0,n.jsxs)(d.Z,{variant:"body2",sx:{fontSize:{xs:"12px",sm:"14px",md:"16px"},whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"right",color:"#5f6368"},children:[e.ins," "]})})]})},e.id)),0===u.length&&(0,n.jsx)("div",{children:(0,n.jsxs)(d.Z,{variant:"body1",color:"textSecondary",children:[(0,n.jsx)("p",{children:"お探しの授業が見つかりませんか？"}),(0,n.jsx)("p",{children:"その場合は「授業を追加」から登録してみましょう!"})]})})]}),(0,n.jsx)(i.Z,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:(0,n.jsx)(E.Z,{onClick:M,variant:"outlined",sx:{animation:0===u.length?"glow 1.5s ease-in-out infinite alternate":"none","@keyframes glow":{"0%":{boxShadow:"0 0 5px rgba(33, 150, 243, 0.5)",borderColor:"#2196F3"},"100%":{boxShadow:"0 0 10px rgba(33, 150, 243, 1)",borderColor:"#2196F3"}}},children:"最新データを取得"})})]})})},eb=r(7699),ej=()=>{let[e,t]=(0,o.useState)(!1);return(0,n.jsxs)(i.Z,{sx:{width:"100%",maxWidth:600,mx:"auto",textAlign:"center",paddingTop:"2rem"},children:[(0,n.jsx)(S.Z,{label:"",variant:"outlined",placeholder:"検索",onClick:()=>t(!0),fullWidth:!0,InputProps:{startAdornment:(0,n.jsx)(eb.Z,{sx:{color:"rgba(0, 0, 0, 0.54)",mr:1}}),sx:{backgroundColor:"white",borderRadius:"9999px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)","& .MuiOutlinedInput-notchedOutline":{borderColor:"transparent"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"transparent"}}}}),(0,n.jsx)(eg,{open:e,onClose:()=>t(!1)})]})},ev=r(270),eZ=r(4696),eC=r(2879),ey=r(5253),ew=r(9678),ek=r(8379),eS=r(8866),eF=r(5635),eI=r(2184),eB=r(8498),eW=r(7905),eE=r(7630),eR=r(5962),eA=r(9434),eP=e=>{let{open:t,onClose:r}=e,{favoriteClasses:o}=(0,eR.u)(),l=(0,s.useRouter)(),a=e=>{localStorage.setItem("selectedClassId",e),l.push("/Class"),r()},c=Object.keys(o).sort((e,t)=>o[e].cN.localeCompare(o[t].cN));return(0,n.jsx)(ec.Z,{open:t,onClose:r,closeAfterTransition:!0,slotProps:{backdrop:{sx:{backgroundColor:"traslator",opacity:.4},timeout:500}},children:(0,n.jsx)(eF.Z,{in:t,children:(0,n.jsxs)(i.Z,{sx:{p:2.2,width:"90%",maxWidth:1200,margin:"auto",mt:"10%",backgroundColor:"#F8BBD0",borderRadius:"1rem",boxShadow:"0 4px 20px rgba(244, 114, 182, 0.15)",color:"#4B5563",fontFamily:'"Helvetica Neue", Arial, sans-serif',maxHeight:"80vh",overflowY:"auto",position:"relative"},children:[(0,n.jsx)(m.Z,{onClick:r,sx:{position:"absolute",top:8,right:15,color:"#EC4899",zIndex:1300,"&:hover":{backgroundColor:"rgba(236, 72, 153, 0.1)"}},children:(0,n.jsx)(eE.Z,{})}),(0,n.jsx)(d.Z,{variant:"h4",gutterBottom:!0,sx:{fontWeight:"bold",textAlign:"center",marginBottom:"1rem",background:"linear-gradient(45deg, #FF4081 20%, #F50057 90%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 1px 2px rgba(190, 24, 93, 0.2)"},children:"お気に入り"}),Object.keys(o).length>0?(0,n.jsx)(eI.Z,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr",md:"1fr 1fr",lg:"1fr 1fr 1fr"},gap:.7},children:c.map(e=>{let t=o[e];return t&&t.favorite?(0,n.jsx)(eu.Z,{sx:{p:.3,backgroundColor:"rgba(255, 255, 255, 1)",borderRadius:"17px",transition:"transform 0.2s ease-in-out, background 0.1s ease-in-out","&:hover":{transform:"scale(1.01)",backgroundColor:"rgba(255, 255, 255, 1)"}},children:(0,n.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,n.jsx)(eB.ZP,{button:!0,onClick:()=>a(e),sx:{flexGrow:1,"&:hover":{backgroundColor:"transparent"}},children:(0,n.jsx)(eW.Z,{primary:(0,n.jsx)(d.Z,{variant:"body1",sx:{fontSize:{xs:"0.8rem",sm:"0.65rem",md:"1.0rem",lg:"1rem"},color:"#37474f"},children:t.cN}),secondary:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(d.Z,{component:"span",variant:"body2",color:"textSecondary",sx:{fontSize:{xs:"0.6rem",sm:"0.6rem",md:"1rem",lg:"0.9rem"}},children:["教員: ",t.ins]}),(0,n.jsx)("br",{}),(0,n.jsxs)(d.Z,{component:"span",variant:"body2",color:"textSecondary",sx:{fontSize:{xs:"0.6rem",sm:"0.6rem",md:"1rem",lg:"0.9rem"}},children:["時間: ",t.trm,"期 / ",t.dWk,"曜 / ",t.prd,"限"]})]}),sx:{color:"#37474f"}})}),(0,n.jsx)(i.Z,{sx:{mr:1},children:(0,n.jsx)(eA.y,{classId:e})})]})},e):null})}):(0,n.jsx)(d.Z,{variant:"body1",color:"textSecondary",children:"お気に入りに登録されている授業はありません。"})]})})})},eD=r(9701),eU=r(4149),ez=r(2406),eN=r(1291);let eO=["月","火","水","木","金"],eM=["1","2","3","4","5"];var eT=e=>{let{open:t,onClose:r}=e,{favoriteClasses:l}=(0,eR.u)(),a=(0,er.Z)(),c=(0,q.Z)(a.breakpoints.down("sm")),x=(0,s.useRouter)(),[u,h]=(0,o.useState)(!1),[p,f]=(0,o.useState)(null),[g,b]=(0,o.useState)(""),[j,v]=(0,o.useState)(""),[C,y]=(0,o.useState)(""),[w,k]=(0,o.useState)("");(0,o.useEffect)(()=>{t||h(!1)},[t]);let F=(e,t)=>{let r=Object.entries(B).find(r=>{let[n,s]=r;return s.dWk===e&&s.prd===t&&!0===s.myclass});if(r){let[e,t]=r;return(0,n.jsxs)(eu.Z,{elevation:1,sx:{p:.5,height:"90%",width:"90%",minHeight:{xs:110,sm:120,md:130},backgroundColor:"rgba(255, 255, 255, 0.9)",borderRadius:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",transition:"transform 0.2s, background-color 0.3s",mb:3,"&:hover":{transform:"scale(1.02)",backgroundColor:u?"#F8BBD0":"#BBDEFB"}},onClick:()=>{u?(f(e),b(t.cN),v(t.loc),y(t.dWk),k(t.prd)):(localStorage.setItem("selectedClassId",e),x.push("/Class"))},children:[(0,n.jsx)(d.Z,{variant:"body2",fontWeight:"normal",align:"center",sx:{fontSize:{xs:"0.5rem",sm:"0.7rem",md:"0.8rem"},lineHeight:1.5},children:t.cN}),(0,n.jsx)(d.Z,{variant:"caption",color:"textSecondary",align:"center",sx:{fontSize:{xs:"0.5rem",sm:"0.6rem",md:"0.7rem"},lineHeight:1.5},children:t.loc})]})}return(0,n.jsx)(eu.Z,{elevation:1,sx:{p:.5,height:"90%",width:"90%",minHeight:{xs:110,sm:120,md:130},backgroundColor:"rgba(245, 245, 245, 0.9)",borderRadius:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:(0,n.jsx)(d.Z,{variant:"body2",color:"textSecondary",align:"center",sx:{fontSize:{xs:"0.6rem",sm:"0.7rem",md:"0.8rem"}},children:"空きコマ"})})},{setFavoriteClasses:I,myClasses:B,setMyClasses:W,toggleMyClass:R}=(0,eR.u)(),[A,P]=(0,o.useState)(!1),D=()=>{P(!1)},U=async()=>{let e=Z.I.currentUser;if(e&&p){let t=(0,ef.JU)(Z.R,"users/users/".concat(e.email,"/myclass"));if(Object.entries(B).find(e=>{let[t,r]=e;return r.dWk===C&&r.prd===w&&t!==p})){alert("その時間は別の授業が登録されています。");return}await (0,ef.r7)(t,{["".concat(p,".cN")]:g,["".concat(p,".loc")]:j,["".concat(p,".dWk")]:C,["".concat(p,".prd")]:w}),W(e=>{var t;if(!(null===(t=e[p])||void 0===t?void 0:t.myclass)){let{[p]:t,...r}=e;return r}return{...e,[p]:{...e[p],cN:g,loc:j,dWk:C,prd:w,myclass:!0}}}),f(null)}};return(0,n.jsx)(ec.Z,{open:t,onClose:r,closeAfterTransition:!0,slotProps:{backdrop:{sx:{backgroundColor:"traslator"},timeout:500}},children:(0,n.jsx)(eF.Z,{in:t,children:(0,n.jsxs)(i.Z,{children:[(0,n.jsxs)(i.Z,{sx:{p:{xs:1,sm:2},backgroundColor:u?"#F48FB1":"#A5D6A7",transition:"background-color 1s ease",maxHeight:"calc(100vh - 10px)",margin:"auto",width:c?"95%":"90%",maxWidth:900,overflowY:"auto",overflowX:"hidden",borderRadius:{xs:2,sm:4},boxShadow:4,mt:2,mb:2,"&::-webkit-scrollbar":{display:"none"},"-ms-overflow-style":"none","scrollbar-width":"none"},children:[(0,n.jsxs)(i.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,n.jsx)(i.Z,{sx:{flex:"0 1 auto",display:"flex",alignItems:"center",justifyContent:"flex-start",mr:2},children:(0,n.jsx)(m.Z,{onClick:()=>h(!u),children:(0,n.jsx)(eN.Z,{sx:{fontSize:30}})})}),(0,n.jsx)(i.Z,{sx:{flex:"1 1 auto",textAlign:"center",px:2},children:(0,n.jsx)(d.Z,{variant:"h6",gutterBottom:!0,fontWeight:"normal",sx:{color:"#5D4037",fontSize:{xs:"1.5rem",sm:"2.25rem"},whiteSpace:"nowrap",fontFamily:"Times New Roman"},children:u?"Edit Myclass":"MyClass"})}),(0,n.jsx)(i.Z,{sx:{flex:"0 1 auto",display:"flex",alignItems:"center",justifyContent:"flex-end",ml:2},children:(0,n.jsx)(m.Z,{onClick:r,children:(0,n.jsx)(eE.Z,{})})})]}),(0,n.jsxs)(et.ZP,{container:!0,spacing:.7,sx:{mt:.1},alignItems:"stretch",children:[(0,n.jsx)(et.ZP,{item:!0,xs:1,children:(0,n.jsx)(i.Z,{})}),eO.map(e=>(0,n.jsx)(et.ZP,{item:!0,xs:2.2,children:(0,n.jsx)(d.Z,{variant:"subtitle2",align:"center",fontWeight:"bold",sx:{fontSize:{xs:"0.7rem",sm:"0.8rem",md:"0.9rem"}},children:e})},e)),eM.map(e=>(0,n.jsxs)(o.Fragment,{children:[(0,n.jsx)(et.ZP,{item:!0,xs:1,sx:{mb:.1},children:(0,n.jsx)(d.Z,{variant:"subtitle2",align:"center",fontWeight:"bold",sx:{fontSize:{xs:"0.7rem",sm:"0.8rem",md:"0.9rem"},display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:e})}),eO.map(t=>(0,n.jsx)(et.ZP,{item:!0,xs:2.2,sx:{display:"flex",alignItems:"stretch"},children:F(t,e)},"".concat(t,"-").concat(e)))]},e))]}),(0,n.jsx)(i.Z,{sx:{mt:1}})]}),p&&(0,n.jsx)(ec.Z,{open:!0,onClose:()=>f(null),children:(0,n.jsxs)(i.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"90%",sm:"60%",md:"40%"},bgcolor:"#fff",borderRadius:4,boxShadow:24,p:4,display:"flex",flexDirection:"column",gap:2},children:[(0,n.jsxs)(i.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,n.jsx)(d.Z,{variant:"h6",component:"h2",sx:{color:"#EC407A"},children:"授業を編集"}),(0,n.jsx)(m.Z,{onClick:()=>f(null),sx:{color:"#EC407A"},children:(0,n.jsx)(eE.Z,{})})]}),(0,n.jsx)(S.Z,{fullWidth:!0,label:"授業",variant:"outlined",value:g,onChange:e=>b(e.target.value),sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#B0B0B0"},"&:hover fieldset":{borderColor:"#EC407A"},"&.Mui-focused fieldset":{borderColor:"#EC407A"}},"& .MuiInputLabel-root.Mui-focused":{color:"#EC407A"}}}),(0,n.jsx)(S.Z,{fullWidth:!0,label:"教室",variant:"outlined",value:j,onChange:e=>v(e.target.value),sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#B0B0B0"},"&:hover fieldset":{borderColor:"#EC407A"},"&.Mui-focused fieldset":{borderColor:"#EC407A"}},"& .MuiInputLabel-root.Mui-focused":{color:"#EC407A"}}}),(0,n.jsx)(d.Z,{variant:"subtitle1",sx:{mt:2,color:"#EC407A"},children:"曜日"}),(0,n.jsx)(eU.Z,{value:C,exclusive:!0,onChange:(e,t)=>{null!==t&&y(t)},fullWidth:!0,sx:{"& .Mui-selected":{backgroundColor:"#EC407A !important",color:"#000"}},children:eO.map(e=>(0,n.jsx)(ez.Z,{value:e,sx:{flexGrow:1,borderRadius:2},children:e},e))}),(0,n.jsx)(d.Z,{variant:"subtitle1",sx:{mt:2,color:"#EC407A"},children:"時限"}),(0,n.jsx)(eU.Z,{value:w,exclusive:!0,onChange:(e,t)=>{null!==t&&k(t)},fullWidth:!0,sx:{"& .Mui-selected":{backgroundColor:"#EC407A !important",color:"#000"}},children:eM.map(e=>(0,n.jsx)(ez.Z,{value:e,sx:{flexGrow:1,borderRadius:2},children:e},e))}),(0,n.jsxs)(i.Z,{sx:{display:"flex",justifyContent:"space-between",mt:3},children:[(0,n.jsx)(E.Z,{variant:"outlined",onClick:()=>{P(!0)},sx:{borderColor:"#EC407A",color:"#EC407A","&:hover":{borderColor:"#D81B60",color:"#D81B60"}},children:"時間割から取り消す"}),(0,n.jsx)(E.Z,{variant:"contained",sx:{backgroundColor:"#EC407A","&:hover":{backgroundColor:"#D81B60"}},onClick:U,disabled:!g||!j,children:"保存"})]}),(0,n.jsx)(ec.Z,{open:A,onClose:D,"aria-labelledby":"confirm-delete-title","aria-describedby":"confirm-delete-description",children:(0,n.jsxs)(i.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:300,bgcolor:"background.paper",border:"none",boxShadow:24,p:4,borderRadius:2},children:[(0,n.jsx)(d.Z,{id:"confirm-delete-title",variant:"h6",component:"h2",sx:{color:"#EC407A"},children:"確認"}),(0,n.jsx)(d.Z,{id:"confirm-delete-description",sx:{mt:2},children:"本当にこの授業を時間割から取り消してもよろしいですか？"}),(0,n.jsxs)(i.Z,{sx:{mt:3,display:"flex",justifyContent:"space-between"},children:[(0,n.jsx)(E.Z,{variant:"contained",sx:{backgroundColor:"#EC407A","&:hover":{backgroundColor:"#D81B60"}},onClick:()=>{p&&(R(p),f(null),P(!1))},children:"いいよ"}),(0,n.jsx)(E.Z,{variant:"outlined",sx:{borderColor:"#EC407A",color:"#EC407A","&:hover":{borderColor:"#D81B60",color:"#D81B60"}},onClick:D,children:"キャンセル"})]})]})})]})})]})})})},eY=r(1014),eL=r(5725),eJ=e=>{let{courseId:t,onCourseIdChange:r,onSubmit:s}=e;return(0,n.jsxs)("form",{onSubmit:s,children:[(0,n.jsx)(S.Z,{fullWidth:!0,label:"履修コード",variant:"outlined",value:t,onChange:e=>r(e.target.value.trim().replace(/\s+/g,"")),style:{marginBottom:"20px"}}),(0,n.jsx)(E.Z,{variant:"contained",type:"submit",disabled:!t.trim(),sx:{backgroundColor:t?"#42a5f5":"#bbdefb",color:"#ffffff",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)",transition:"all 0.3s","&:hover":{backgroundColor:t?"#1e88e5":"#90caf9",transform:"translateY(-3px)",boxShadow:"0 6px 25px rgba(0, 0, 0, 0.2)"}},children:"講義情報を取得する"})]})},eH=e=>{let{data:t}=e;return(0,n.jsxs)(et.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(et.ZP,{item:!0,xs:12,children:(0,n.jsx)(S.Z,{fullWidth:!0,label:"授業科目名",variant:"outlined",value:(null==t?void 0:t.cN)||"",disabled:!0})}),(0,n.jsx)(et.ZP,{item:!0,xs:12,children:(0,n.jsx)(S.Z,{fullWidth:!0,label:"担当教員",variant:"outlined",value:(null==t?void 0:t.ins)||"",disabled:!0})}),(0,n.jsx)(et.ZP,{item:!0,xs:12,children:(0,n.jsx)(S.Z,{fullWidth:!0,label:"科目開講学部・学科",variant:"outlined",value:(null==t?void 0:t.dpt)||"",disabled:!0})}),(0,n.jsx)(et.ZP,{item:!0,xs:12,children:(0,n.jsx)(S.Z,{fullWidth:!0,label:"対象学年",variant:"outlined",value:(null==t?void 0:t.tYr)||"",disabled:!0})}),(0,n.jsx)(et.ZP,{item:!0,xs:12,children:(0,n.jsx)(S.Z,{fullWidth:!0,label:"シラバスURL",variant:"outlined",value:(null==t?void 0:t.sUrl)||"",disabled:!0})}),(0,n.jsx)(et.ZP,{item:!0,xs:12,children:(0,n.jsx)(S.Z,{fullWidth:!0,label:"開講学期・曜日・時間割・教室",variant:"outlined",value:(null==t?void 0:t.sched)||"",disabled:!0})}),(0,n.jsx)(et.ZP,{item:!0,xs:12,children:(0,n.jsx)(S.Z,{fullWidth:!0,label:"授業の形態",variant:"outlined",value:(null==t?void 0:t.fmt)||"",disabled:!0})}),(0,n.jsx)(et.ZP,{item:!0,xs:12,children:(0,n.jsx)(S.Z,{fullWidth:!0,label:"単位",variant:"outlined",value:(null==t?void 0:t.crd)||"",disabled:!0})}),(null==t?void 0:t.note)&&(0,n.jsx)(et.ZP,{item:!0,xs:12,children:(0,n.jsx)(S.Z,{fullWidth:!0,label:"備考",variant:"outlined",value:t.note||"",disabled:!0})})]})},eG=r(7270),e_=e=>{let{success:t,error:r}=e;return(0,n.jsxs)(n.Fragment,{children:[t&&(0,n.jsx)(et.ZP,{item:!0,xs:12,children:(0,n.jsx)(eG.Z,{severity:"success",style:{marginTop:"20px"},children:t})}),r&&(0,n.jsx)(et.ZP,{item:!0,xs:12,children:(0,n.jsx)(eG.Z,{severity:"error",style:{marginTop:"20px"},children:r})})]})},eQ=r(3032),eK=e=>{let{open:t,onClose:r}=e,[l,a]=(0,o.useState)(""),[c,x]=(0,o.useState)(null),[u,h]=(0,o.useState)(null),[p,f]=(0,o.useState)(null),[g,j]=(0,o.useState)(!1),v=(0,s.useRouter)(),C=new Date().getFullYear(),y=async e=>{e.preventDefault();let t=l.trim().replace(/\s+/g,""),r="https://alss-portal.gifu-u.ac.jp/campusweb/slbssbdr.do?risyunen=".concat(C,"&semekikn=1&kougicd=").concat(t);try{let e=await fetch("https://classgu.raimukun.com/API/sirabasuget.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:r})});if(e.ok){let t=await e.json(),r=S(t.sched);x({...t,...r}),h(null)}else h("講義情報の取得に失敗しました")}catch(e){h("講義情報の取得中にエラーが発生しました。")}},w=async()=>{if(c){let a=l.trim().replace(/\s+/g,""),d=(0,ef.JU)(Z.R,"class/class/".concat(a,"/detail"));try{var e,t,r,n,s,o,i;let l=await (0,ef.QT)(d);if(l.exists()){let e=l.data();if(e){let t=null===(i=e.cAt)||void 0===i?void 0:i.toDate();if(t){let e="この講義は既に登録されています。以前の作成日は ".concat(t.toLocaleDateString()," です。更新しますか？");j(!0),h(e);return}}}let a={...c,cN:c.cN.trim(),cNE:(null===(e=c.cNE)||void 0===e?void 0:e.trim())||"",ins:c.ins.trim(),dpt:c.dpt.trim(),sCat:c.sCat.trim(),sCls:(null===(t=c.sCls)||void 0===t?void 0:t.trim())||"",tYr:c.tYr.trim().replace("年生","").replace(/[０-９]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248)),sched:c.sched.trim(),fmt:c.fmt.trim(),rCode:c.rCode.trim(),crd:c.crd.trim(),note:c.note.trim(),sUrl:c.sUrl.trim(),trm:(null===(r=c.trm)||void 0===r?void 0:r.trim().replace("学期",""))||"",dWk:(null===(n=c.dWk)||void 0===n?void 0:n.trim().replace("曜日",""))||"",prd:(null===(s=c.prd)||void 0===s?void 0:s.trim().replace(/[０-９]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248)))||"",loc:(null===(o=c.loc)||void 0===o?void 0:o.trim())||"",cAt:ef.EK.fromDate(new Date)};await (0,ef.pl)(d,a),await (0,ef.pl)((0,ef.JU)(Z.R,"class/classmanage"),{[a.rCode]:{cN:a.cN,ins:a.ins,dpt:a.dpt,sCat:a.sCat,sCls:a.sCls,tYr:parseInt(a.tYr,10),crd:parseFloat(a.crd),trm:a.trm,dWk:a.dWk,prd:parseInt(a.prd,10),cAt:a.cAt}},{merge:!0}),f("授業情報が新しく登録されました！"),h(null),setTimeout(()=>{v.push("/dashboard")},1e3)}catch(e){h("授業の登録中にエラーが発生しました。"),f(null)}}},k=async()=>{if(c){let i=l.trim().replace(/\s+/g,"");try{var e,t,r,n,s,o;let l={...c,cN:c.cN.trim(),cNE:(null===(e=c.cNE)||void 0===e?void 0:e.trim())||"",ins:c.ins.trim(),dpt:c.dpt.trim(),sCat:c.sCat.trim(),sCls:(null===(t=c.sCls)||void 0===t?void 0:t.trim())||"",tYr:c.tYr.trim().replace("年生","").replace(/[０-９]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248)),sched:c.sched.trim(),fmt:c.fmt.trim(),rCode:c.rCode.trim(),crd:c.crd.trim(),note:c.note.trim(),sUrl:c.sUrl.trim(),trm:(null===(r=c.trm)||void 0===r?void 0:r.trim().replace("学期",""))||"",dWk:(null===(n=c.dWk)||void 0===n?void 0:n.trim().replace("曜日",""))||"",prd:(null===(s=c.prd)||void 0===s?void 0:s.trim().replace(/[０-９]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248)))||"",loc:(null===(o=c.loc)||void 0===o?void 0:o.trim())||"",cAt:ef.EK.fromDate(new Date)};await (0,ef.pl)((0,ef.JU)(Z.R,"class/class/".concat(i,"/detail")),{...l,cAt:ef.EK.fromDate(new Date)}),await (0,ef.pl)((0,ef.JU)(Z.R,"class/classmanage"),{[l.rCode]:{cN:l.cN,ins:l.ins,dpt:l.dpt,sCat:l.sCat,sCls:l.sCls,tYr:parseInt(l.tYr,10),crd:parseFloat(l.crd),trm:l.trm,dWk:l.dWk,prd:parseInt(l.prd,10),cAt:ef.EK.fromDate(new Date)}},{merge:!0}),f("授業情報が更新されました！"),h(null),setTimeout(()=>{v.push("/dashboard")},1e3)}catch(e){h("授業の更新中にエラーが発生しました。"),f(null)}}},S=e=>{let t=e.match(/(前学期|後学期)/),r=e.match(/(月曜日|火曜日|水曜日|木曜日|金曜日)/),n=e.match(/([１-５])時限/),s=e.match(/(?:月曜日|火曜日|水曜日|木曜日|金曜日)\s[１-５]時限\s(.+)/);return{trm:t?t[0]:"",dWk:r?r[0]:"",prd:n?n[1].replace(/[０-９]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248)):"",loc:s?s[1]:""}};return(0,n.jsx)(ec.Z,{open:t,onClose:r,closeAfterTransition:!0,BackdropProps:{timeout:500},children:(0,n.jsx)(eF.Z,{in:t,children:(0,n.jsx)(i.Z,{sx:{overflowY:"auto",maxHeight:"100vh",width:"90%",maxWidth:900,margin:"auto",boxShadow:2,color:"#37474f",outline:"none",position:"relative","&::-webkit-scrollbar":{display:"none"},"-ms-overflow-style":"none","scrollbar-width":"none"},children:(0,n.jsxs)(b.Z,{maxWidth:"md",sx:{mt:{xs:2,sm:3,md:4},mb:{xs:2,sm:3,md:4},background:"#FFCC80",borderRadius:"16px",padding:{xs:"15px",sm:"20px",md:"30px"},boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[(0,n.jsx)(m.Z,{onClick:r,sx:{position:"absolute",top:50,right:30,color:"#37474f",zIndex:0},children:(0,n.jsx)(eE.Z,{})}),(0,n.jsx)(d.Z,{variant:"h4",gutterBottom:!0,sx:{color:"#fff",fontWeight:"bold",textAlign:"center",fontSize:{xs:"1.5rem",sm:"2rem",md:"2.5rem"},mb:2},children:"授業を追加"}),(0,n.jsxs)(d.Z,{variant:"subtitle1",gutterBottom:!0,sx:{color:"#ffffff",textAlign:"center",mb:{xs:2,sm:3,md:4},fontSize:{xs:"0.9rem",sm:"1rem",md:"1.1rem"}},children:[(0,n.jsx)("h4",{children:"検索したのにお探しの授業が見つからなかった方へ"}),(0,n.jsx)("p",{children:"こちらから授業を追加してみましょう"}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"やりかた："}),"シラバスから登録したい講義を探して、履修コードを入力します。「講義情報を取得する」を押したら、最後に登録ボタンで登録完了です。"]})]}),(0,n.jsx)(E.Z,{variant:"contained",onClick:()=>window.open("https://alss-portal.gifu-u.ac.jp/campusweb/slbsskwr.do?clearAccessData=true&contenam=slbsskwr&kjnmnNo=77","_blank"),sx:{mb:{xs:2,sm:3,md:4},display:"block",mx:"auto",padding:"12px 24px",fontSize:{xs:"0.9rem",sm:"1rem",md:"1.1rem"},borderRadius:"50px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)",background:"linear-gradient(45deg, #42a5f5 30%, #1e88e5 90%)",transition:"all 0.3s","&:hover":{transform:"translateY(-3px)",boxShadow:"0 6px 25px rgba(0, 0, 0, 0.2)",background:"linear-gradient(45deg, #64b5f6 30%, #2196f3 90%)"}},children:"シラバスで履修コードを探す"}),(0,n.jsx)(eu.Z,{sx:{padding:{xs:"20px",sm:"25px",md:"30px"},mb:{xs:2,sm:3,md:4},backgroundColor:"#ffffff",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.08)",borderRadius:"12px"},children:(0,n.jsx)(eJ,{courseId:l,onCourseIdChange:a,onSubmit:y})}),(0,n.jsxs)(eu.Z,{sx:{padding:{xs:"20px",sm:"25px",md:"30px"},backgroundColor:"#ffffff",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.08)",borderRadius:"12px"},children:[(0,n.jsx)(eH,{data:c}),(0,n.jsx)(e_,{success:p,error:u}),(0,n.jsxs)(et.ZP,{container:!0,justifyContent:"center",spacing:2,sx:{mt:{xs:2,sm:3,md:4}},children:[(0,n.jsx)(et.ZP,{item:!0,children:(0,n.jsx)(E.Z,{variant:"contained",startIcon:(0,n.jsx)(eQ.Z,{}),onClick:g?k:w,sx:{background:c&&c.cN&&c.ins&&c.rCode?"linear-gradient(45deg, #42a5f5 30%, #1e88e5 90%)":"grey",color:"#fff",padding:"12px 24px",fontSize:{xs:"0.9rem",sm:"1rem",md:"1.1rem"},boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)",transition:"all 0.3s",borderRadius:"50px",cursor:c&&c.cN&&c.ins&&c.rCode?"pointer":"not-allowed","&:hover":{transform:"scale(1.05)",boxShadow:"0 6px 25px rgba(0, 0, 0, 0.2)",background:"linear-gradient(45deg, #64b5f6 30%, #2196f3 90%)"}},disabled:!c||!c.cN||!c.ins||!c.rCode,children:g?"授業情報を更新する":"授業を登録する"})}),(0,n.jsx)(et.ZP,{item:!0,children:(0,n.jsx)(E.Z,{variant:"outlined",color:"error",onClick:()=>{x(null),a(""),h(null),f(null),j(!1)},sx:{padding:"12px 24px",fontSize:{xs:"0.9rem",sm:"1rem",md:"1.1rem"},borderRadius:"50px",transition:"all 0.3s","&:hover":{transform:"scale(1.05)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)"}},children:"キャンセル"})})]})]})]})})})})},eX=()=>{let e=(0,o.useRef)(null),t=(0,er.Z)(),r=(0,q.Z)(t.breakpoints.down("sm")),[l,a]=(0,o.useState)(0),[c,x]=(0,o.useState)(!1),[u,h]=(0,o.useState)(!1),[p,f]=(0,o.useState)(!1),g=(0,s.useRouter)(),[b,j]=(0,o.useState)(!1),[v,C]=(0,o.useState)(0);(0,o.useEffect)(()=>{e.current&&C(e.current.scrollWidth-e.current.clientWidth)},[]);let{profile:y}=(0,D.U)()||{},w=[{title:"My時間割",icon:(0,n.jsx)(eD.Z,{}),action:"見る",color:"#A5D6A7",onClick:()=>{h(!0)}},{title:"授業を追加",icon:(0,n.jsx)(ey.Z,{}),action:"追加",color:"#FFCC80",onClick:()=>{j(!0)}},{title:"お気に入り",icon:(0,n.jsx)(ew.Z,{}),action:"見る",color:"#F48FB1",onClick:()=>{x(!0)}},{title:"共有",icon:(0,n.jsx)(eL.Z,{}),action:"確認",color:"#90CAF9",onClick:()=>{g.push("/ShareManage/")}},{title:"プロフィール",icon:(0,n.jsx)(eY.Z,{}),action:"編集",color:"#FFAB91",onClick:()=>{f(!0)}}];return(0,n.jsxs)(i.Z,{sx:{position:"relative",mt:10,px:2},children:[(0,n.jsxs)(n.Fragment,{children:[!r&&l>0&&(0,n.jsx)(m.Z,{onClick:()=>{if(e.current){let t=Math.max(l-300,0);e.current.scrollTo({left:t,behavior:"smooth"}),a(t)}},sx:{position:"absolute",left:20,top:"50%",transform:"translateY(-50%)",zIndex:2,bgcolor:"rgba(255,255,255,0.7)","&:hover":{bgcolor:"rgba(255,255,255,0.9)"}},children:(0,n.jsx)(ek.Z,{})}),!r&&l<v&&(0,n.jsx)(m.Z,{onClick:()=>{if(e.current){let t=Math.min(l+300,e.current.scrollWidth-e.current.clientWidth);e.current.scrollTo({left:t,behavior:"smooth"}),a(t)}},sx:{position:"absolute",right:20,top:"50%",transform:"translateY(-50%)",zIndex:2,bgcolor:"rgba(255,255,255,0.7)","&:hover":{bgcolor:"rgba(255,255,255,0.9)"}},children:(0,n.jsx)(eS.Z,{})})]}),(0,n.jsx)(i.Z,{ref:e,onScroll:()=>{e.current&&(a(e.current.scrollLeft),C(e.current.scrollWidth-e.current.clientWidth))},sx:{display:"flex",overflowX:"auto",scrollBehavior:"smooth","&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none",gap:2,py:2},children:w.map((e,t)=>(0,n.jsxs)(ev.Z,{sx:{width:r?"45vw":200,height:r?"45vw":200,flexShrink:0,borderRadius:4,boxShadow:"0 8px 16px rgba(0,0,0,0.1)",transition:"transform 0.3s, box-shadow 0.3s",display:"flex",flexDirection:"column",justifyContent:"space-between","&:hover":{transform:"translateY(-5px)",boxShadow:"0 12px 20px rgba(0,0,0,0.15)"},bgcolor:e.color,cursor:"pointer"},onClick:e.onClick,children:[(0,n.jsxs)(eZ.Z,{sx:{flex:"1 1 auto",textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,n.jsx)(d.Z,{variant:"h6",component:"div",sx:{fontSize:r?"3.5vw":"1.2rem",mb:2,color:"white",textAlign:"center",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.title}),(0,n.jsx)(i.Z,{sx:{color:"white",p:0,fontSize:r?"7vw":"2rem",margin:"0 auto"},children:e.icon})]}),(0,n.jsx)(eC.Z,{sx:{justifyContent:"center",mt:2},children:(0,n.jsx)(E.Z,{size:"medium",sx:{fontSize:r?"3vw":"0.9rem",color:"white",border:"1px solid white",borderRadius:20,px:2,"&:hover":{bgcolor:"rgba(255,255,255,0.2)"}},children:e.action})})]},t))}),(0,n.jsx)(eP,{open:c,onClose:()=>{x(!1)}}),(0,n.jsx)(eT,{open:u,onClose:()=>{h(!1)}}),(0,n.jsx)(X,{open:p,onClose:()=>{f(!1)},user:Z.I.currentUser,photoURL:y.photoURL}),(0,n.jsx)(eK,{open:b,onClose:()=>{j(!1)}})]})},eV=()=>{let{currentUser:e,loading:t}=(0,l.a)(),r=(0,s.useRouter)(),{backgroundUrl:a,backgroundSize:d,positionX:x,positionY:u}=(0,V.h)();return((0,o.useEffect)(()=>{t||e||r.push("/")},[e,t,r]),t)?(0,n.jsx)(i.Z,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:(0,n.jsx)(c,{})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(D.a,{children:(0,n.jsx)(eR.R,{children:(0,n.jsx)(el,{children:(0,n.jsxs)(i.Z,{textAlign:"center",mt:0,sx:{backgroundImage:"url(".concat(a,")"),backgroundSize:d,backgroundPosition:"".concat(x," ").concat(u),backgroundRepeat:"no-repeat",minHeight:"100vh",padding:"0px"},children:[(0,n.jsx)(ej,{}),(0,n.jsx)(eX,{})]})})})})})}},9434:function(e,t,r){"use strict";r.d(t,{_:function(){return u},y:function(){return m}});var n=r(7437),s=r(2265),o=r(1326),l=r(335),i=r(374),a=r(7270),d=r(9678),c=r(277),x=r(5962);let u=e=>{var t;let{classId:r}=e,{favoriteClasses:c,toggleFavorite:u}=(0,x.u)(),[m,h]=(0,s.useState)(null),[p,f]=(0,s.useState)("success"),g=()=>{h(null)},b=null===(t=c[r])||void 0===t?void 0:t.favorite;return(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(l.Z,{onClick:()=>{var e;let t=null===(e=c[r])||void 0===e?void 0:e.favorite;u(r),f("success"),h(t?"お気に入りから削除しました":"お気に入りに追加しました")},sx:{background:b?"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)":"linear-gradient(45deg, #9E9E9E 30%, #BDBDBD 90%)",color:"white",transition:"transform 0.2s, background 0.2s","&:hover":{transform:"scale(1.1)",background:b?"linear-gradient(45deg, #FF8E53 30%, #FE6B8B 90%)":"linear-gradient(45deg, #BDBDBD 30%, #9E9E9E 90%)"}},children:(0,n.jsx)(d.Z,{})}),(0,n.jsx)(i.Z,{open:!!m,autoHideDuration:1e3,onClose:g,children:(0,n.jsx)(a.Z,{onClose:g,severity:p,sx:{width:"100%"},children:m})})]})},m=e=>{var t;let{classId:r}=e,{myClasses:d,toggleMyClass:u}=(0,x.u)(),[m,h]=(0,s.useState)(null),[p,f]=(0,s.useState)("success"),g=()=>{h(null)},b=null===(t=d[r])||void 0===t?void 0:t.myclass;return(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(l.Z,{onClick:()=>{var e;let t=null===(e=d[r])||void 0===e?void 0:e.myclass;u(r),f("success"),h(t?"MyClassから削除しました":"MyClassに登録しました")},sx:{background:b?"linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)":"linear-gradient(45deg, #9E9E9E 30%, #BDBDBD 90%)",color:"white",transition:"transform 0.2s, background 0.2s","&:hover":{transform:"scale(1.1)",background:b?"linear-gradient(45deg, #21CBF3 30%, #2196F3 90%)":"linear-gradient(45deg, #BDBDBD 30%, #9E9E9E 90%)"}},children:(0,n.jsx)(c.Z,{})}),(0,n.jsx)(i.Z,{open:!!m,autoHideDuration:1e3,onClose:g,children:(0,n.jsx)(a.Z,{onClose:g,severity:p,sx:{width:"100%"},children:m})})]})}},8104:function(e,t,r){"use strict";r.d(t,{I:function(){return i},R:function(){return a}});var n=r(5236),s=r(5735),o=r(9842);let l=(0,n.ZF)({apiKey:"AIzaSyAneuAMMtbBTWg5NDCfRkVG-omGi1TEQUk",authDomain:"class-gu.firebaseapp.com",projectId:"class-gu",storageBucket:"class-gu.appspot.com",messagingSenderId:"849841337368",appId:"1:849841337368:web:22ba3476d680bc0400ff6d",measurementId:"G-1QTNC2Z9B2"}),i=(0,s.v0)(l),a=(0,o.ad)(l)}},function(e){e.O(0,[358,605,988,891,433,968,848,263,194,971,23,744],function(){return e(e.s=4431)}),_N_E=e.O()}]);