(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[952],{2489:function(e,t,r){Promise.resolve().then(r.bind(r,7180))},8916:function(e,t,r){"use strict";var s=r(7437),a=r(2265),n=r(1326),l=r(1733),i=r(9806),o=r(335),c=r(511),d=r(2197),x=r(8433),m=r(4602),h=r(6463),u=r(8104);t.Z=e=>{let{children:t}=e,r=(0,h.useRouter)(),f=new Date().getFullYear();return(0,a.useEffect)(()=>{let e=u.I.onAuthStateChanged(e=>{e||r.push("/")});return()=>e()},[r]),(0,s.jsxs)(n.Z,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[(0,s.jsx)(l.Z,{position:"static",sx:{background:"linear-gradient(30deg, #6a11cb 0%, #2575fc 100%)"},children:(0,s.jsxs)(i.Z,{children:[(0,s.jsx)(o.Z,{edge:"start",color:"inherit","aria-label":"back",onClick:()=>r.push("/dashboard"),sx:{mr:2},children:(0,s.jsx)(m.Z,{})}),(0,s.jsx)(c.Z,{variant:"h6",sx:{flexGrow:1,textAlign:"center"},children:"CLASSGU"}),(0,s.jsx)(n.Z,{sx:{width:48}})," "]})}),(0,s.jsx)(n.Z,{component:"main",sx:{flex:1},children:t}),(0,s.jsx)(n.Z,{component:"footer",sx:{background:"linear-gradient(10deg, #303F9F 30%, #039BE5 90%)",color:"#fff",pt:3,pb:2,position:"relative",overflow:"hidden"},children:(0,s.jsxs)(d.Z,{children:[(0,s.jsxs)(x.ZP,{container:!0,spacing:2,justifyContent:"center",children:[(0,s.jsxs)(x.ZP,{item:!0,xs:12,sm:5,children:[(0,s.jsx)(c.Z,{variant:"h6",gutterBottom:!0,children:"ClassGU"}),(0,s.jsx)(c.Z,{variant:"body2",children:"This is a learning platform for Gifu University students."})]}),(0,s.jsx)(x.ZP,{item:!0,xs:12,sm:3}),(0,s.jsxs)(x.ZP,{item:!0,xs:12,sm:4,children:[(0,s.jsx)(c.Z,{variant:"h6",gutterBottom:!0,children:"Contact"}),(0,s.jsx)(c.Z,{variant:"body2",children:"developer@sharettle.com"}),(0,s.jsx)(c.Z,{variant:"body2",children:"090-xxxx-xxxx"})]})]}),(0,s.jsx)(n.Z,{mt:5,textAlign:"center",children:(0,s.jsxs)(c.Z,{variant:"body2",sx:{opacity:.6},children:["\xa9 ",f," ClassGU by Sharettle. Developer R.M."]})})]})})]})}},7180:function(e,t,r){"use strict";var s=r(7437),a=r(2265),n=r(9842),l=r(5735),i=r(8104),o=r(1326),c=r(511),d=r(335),x=r(8549),m=r(6065),h=r(9004),u=r(6557),f=r(3983),g=r(8433),p=r(4990),j=r(2879),Z=r(6548),b=r(9216),v=r(6798),S=r(7630),y=r(6604),w=r(7883),C=r(1096),D=r(8784),A=r(385),F=r(3269),k=r(824),z=r(9780),I=r(6272),R=r(8916);let E=async e=>{if(!e)return null;try{let t=(0,n.JU)(i.R,"users/users/".concat(e,"/share")),r=await (0,n.QT)(t);if(r.exists())return r.data();return null}catch(e){return null}},B=async(e,t,r)=>{let s=(0,n.JU)(i.R,t.path),a=(0,n.JU)(i.R,"users/users/".concat(r.email,"/share"));try{await (0,n.r7)(s,{[e]:(0,n.AK)()}),await (0,n.r7)(a,{[e]:(0,n.AK)()})}catch(e){}},N=e=>{switch(e){case"report":return"#90CAF9";case"test":return"#F48FB1";case"other":return"#FFAB91";default:return"#ECEFF1"}},T=e=>{switch(e){case"report":case"test":case"other":return"#FFFFFF";default:return"#000000"}},M=["本当にいいの？","まだ間に合うよ","後悔しない？","これでいいんですね？","本当にこれでいいの？","最後のチャンスだよ？","取り返しがつかないけどいいの？","本当に削除してもいいの？","これで全部失うけど本当に？","後戻りはできないよ","もう元には戻せない、、","今が引き返す最後のタイミングだ","この操作はもう取り消せないよ？","本当にいいんだね？","消しちゃったら終わりだけど、いいの？","失ったものは戻らない"],O=()=>{let e=Math.floor(Math.random()*M.length);return M[e]},W=e=>{let{email:t}=e,[r,n]=(0,a.useState)(null),[i,M]=(0,a.useState)(null),[W,G]=(0,a.useState)({}),[P,U]=(0,a.useState)(!1),[_,J]=(0,a.useState)(null),[L,H]=(0,a.useState)(null),[K,Q]=(0,a.useState)(O()),[V,Y]=(0,a.useState)("all"),[q,X]=(0,a.useState)(""),[$,ee]=(0,a.useState)("まだ共有されていません"),[et,er]=(0,a.useState)("newest"),[es,ea]=(0,a.useState)(!1),[en,el]=(0,a.useState)(!1);(0,a.useEffect)(()=>{el(!0)},[]),(0,a.useEffect)(()=>{(async()=>{if(t){let e=localStorage.getItem("shareData");if(e)n(JSON.parse(e)),ee(null);else{let e=await E(t);e?(n(e),localStorage.setItem("shareData",JSON.stringify(e)),ee(null)):(n(null),ee("共有データがありません。"))}}})()},[t]);let ei=r?Array.from(new Set(Object.values(r).map(e=>e.classData.cN))):[],eo=async()=>{if(t){let e=await E(t);e?(n(e),localStorage.setItem("shareData",JSON.stringify(e)),ee(null)):(n(null),ee("共有データがありません。"))}},ec=(e,t)=>{J(e),H(t),Q(O()),U(!0)},ed=()=>{U(!1),J(null),H(null)};(0,a.useEffect)(()=>{let e=(0,l.v0)(),t=(0,l.Aj)(e,e=>{e?M(e):M(null)});return()=>t()},[]);let ex=e=>{G(t=>({...t,[e]:!t[e]}))},em=r?Object.entries(r).filter(e=>{let[t,r]=e,s="all"===V||r.classData.share===V,a=r.classData.cN.toLowerCase().includes(q.toLowerCase());return s&&a}).sort((e,t)=>{let[r,s]=e,[a,n]=t;return"newest"===et?n.classData.createdAt.seconds-s.classData.createdAt.seconds:"oldest"===et?s.classData.createdAt.seconds-n.classData.createdAt.seconds:0}):[];return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(o.Z,{sx:{opacity:en?1:0,transition:"opacity 2s ease-in-out"},children:(0,s.jsxs)(R.Z,{children:[(0,s.jsxs)(o.Z,{display:"flex",justifyContent:"space-around",alignItems:"center",mb:3,sx:{borderRadius:"0px",background:"linear-gradient(20deg, #303F9F 1%, #039BE5 90%)",borderBottomLeftRadius:"15px",borderBottomRightRadius:"15px",p:.5},children:[(0,s.jsx)(c.Z,{variant:"h4",gutterBottom:!0,sx:{color:"#fff",fontFamily:"Times New Roman, Times, serif"},children:"ManageShare"}),(0,s.jsx)(d.Z,{onClick:()=>{ea(!0),eo(),setTimeout(()=>ea(!1),2e3)},sx:{bgcolor:"#fff","&:hover":{bgcolor:"#E1F5FE",transform:"scale(1.2),rotate(45deg)"},borderRadius:"50%",p:1,transition:"transform 2s ease",transform:es?"rotate(1080deg)":"rotate(0deg)"},children:(0,s.jsx)(v.Z,{sx:{color:"#90CAF9"}})})]}),(0,s.jsxs)(o.Z,{display:"flex",gap:.5,mb:1,children:[(0,s.jsxs)(x.Z,{variant:"outlined",size:"small",children:[(0,s.jsx)(m.Z,{id:"filter-type-label",children:"Type"}),(0,s.jsxs)(h.Z,{labelId:"filter-type-label",value:V,onChange:e=>Y(e.target.value),label:"Type",sx:{minWidth:"70px",width:"12vw",minHeight:"4.5vh",height:"4.7",fontSize:{xs:"0.5rem",sm:"0.5rem",md:"0.9rem",lg:"1.1rem"},whiteSpace:"nowrap",overflow:"hidden",textOverflow:"clip"},children:[(0,s.jsx)(u.Z,{value:"all",children:"すべて"}),(0,s.jsx)(u.Z,{value:"report",children:"レポート・課題"}),(0,s.jsx)(u.Z,{value:"test",children:"過去問"}),(0,s.jsx)(u.Z,{value:"other",children:"その他"})]})]}),(0,s.jsxs)(x.Z,{variant:"outlined",size:"small",children:[(0,s.jsx)(m.Z,{id:"sort-order-label",sx:{fontSize:{xs:"0.7rem",sm:"0.8rem",md:"0.8rem",lg:"1.1rem"}},children:"登録日"}),(0,s.jsxs)(h.Z,{labelId:"sort-order-label",value:et,onChange:e=>er(e.target.value),label:"Order",sx:{minWidth:"80px",width:"12vw",minHeight:"4.5vh",height:"4.7",fontSize:{xs:"0.5rem",sm:"0.5rem",md:"0.9rem",lg:"1.1rem"},whiteSpace:"nowrap",overflow:"hidden",textOverflow:"clip"},children:[(0,s.jsx)(u.Z,{value:"newest",children:"新しい順"}),(0,s.jsx)(u.Z,{value:"oldest",children:"古い順"})]})]}),(0,s.jsx)(I.Z,{freeSolo:!0,options:ei,value:q,onChange:(e,t)=>X(t||""),onInputChange:(e,t)=>X(t),renderInput:e=>(0,s.jsx)(f.Z,{...e,variant:"outlined",size:"small",label:"Course Name"}),sx:{minHeight:"4.5vh",maxWidth:"500px",minWidth:"200px",width:"55vw"},ListboxProps:{sx:{"& .MuiAutocomplete-option":{fontSize:"1rem"},"& .MuiAutocomplete-option:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"},"@media (max-width: 600px)":{"& .MuiAutocomplete-option":{fontSize:"0.7rem"}},"@media (min-width: 600px) and (max-width: 960px)":{"& .MuiAutocomplete-option":{fontSize:"0.8rem"}},"@media (min-width: 960px)":{"& .MuiAutocomplete-option":{fontSize:"0.9rem"}}}}})]}),null===r||0===em.length?(0,s.jsx)(o.Z,{sx:{textAlign:"center",mt:3},children:(0,s.jsx)(c.Z,{variant:"body2",color:"textSecondary",children:"共有データがありません。"})}):(0,s.jsx)(g.ZP,{container:!0,spacing:.7,children:em.map(e=>{let[t,r]=e;return(0,s.jsx)(g.ZP,{item:!0,xs:4,sm:4,md:3,lg:2,xl:1.5,children:(0,s.jsxs)(p.Z,{sx:{padding:1,backgroundColor:N(r.classData.share),color:T(r.classData.share),transition:"transform 0.2s",borderRadius:2,boxShadow:0,"&:hover":{transform:"scale(1.02)",boxShadow:0}},children:[(0,s.jsx)(c.Z,{variant:"body2",sx:{fontSize:{xs:"0.6rem",sm:"0.8rem",md:"1rem",lg:"1rem",xl:"1.0rem"},whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:r.classData.cN}),(0,s.jsxs)(c.Z,{variant:"body2",sx:{fontSize:{xs:"0.7rem",sm:"0.8rem",md:"1rem",lg:"1rem",xl:"1.0rem"},fontWeight:"normal",marginBottom:1},children:["・",r.classData.Title]}),(0,s.jsxs)(o.Z,{sx:{textAlign:"right"},children:[r.classData.deadline&&(0,s.jsx)(o.Z,{sx:{mt:-.5,mb:.5},children:(0,s.jsxs)(c.Z,{variant:"body2",sx:{opacity:1,fontSize:{xs:"0.6rem",sm:"0.7rem",md:"0.8rem"},textAlign:"right"},children:["期限: ",r.classData.deadline]})}),r.classData.whichtest&&(0,s.jsx)(o.Z,{sx:{mt:-.5,mb:.5},children:(0,s.jsxs)(c.Z,{variant:"body2",sx:{opacity:1,fontSize:{xs:"0.6rem",sm:"0.7rem",md:"0.8rem"},textAlign:"right"},children:[r.classData.when,r.classData.whichtest]})}),"other"===r.classData.share&&""===r.classData.deadline&&(0,s.jsx)(o.Z,{sx:{mt:-.5,mb:.5},children:(0,s.jsx)(c.Z,{variant:"body2",sx:{opacity:0,fontSize:{xs:"0.6rem",sm:"0.7rem",md:"0.8rem"},textAlign:"right"},children:"見せられないよ"})})]}),(0,s.jsx)(j.Z,{sx:{justifyContent:"center",mt:-1},children:(0,s.jsx)(Z.Z,{variant:"outlined",href:r.classData.url,target:"_blank",rel:"noopener noreferrer",size:"medium",sx:{fontSize:{xs:"0.7rem",sm:"0.8rem",md:"1.0rem"},color:"white",border:"1px solid #fff",borderRadius:"15px",px:4,py:.8,backgroundColor:"",display:"flex",alignItems:"center","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)",borderColor:"#fff"}},children:(0,s.jsx)(c.Z,{sx:{textTransform:"none",fontSize:"inherit",color:"inherit",margin:-.1,padding:0},children:"Check"})})}),(0,s.jsxs)(o.Z,{mt:-1,sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,s.jsx)(Z.Z,{variant:"text",sx:{color:T(r.classData.share),textTransform:"none",fontWeight:"bold",fontSize:"0.875rem",justifyContent:"flex-start","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},onClick:()=>ex(t),children:W[t]?(0,s.jsx)(S.Z,{sx:{fontSize:"1rem"}}):(0,s.jsx)(y.Z,{sx:{fontSize:"1rem"}})}),(0,s.jsx)(d.Z,{onClick:()=>ec(t,r.classData),sx:{fontSize:"0.5rem",color:"#78909C"},children:(0,s.jsx)(w.Z,{})})]}),r.classData.comment&&(0,s.jsxs)(o.Z,{sx:{mt:0},children:[(0,s.jsx)(b.Z,{in:W[t],children:(0,s.jsx)(o.Z,{sx:{mt:0,p:.7,backgroundColor:"#FFF",opacity:.8,borderRadius:2,boxShadow:0,color:"#5D4037"},children:(0,s.jsx)(c.Z,{variant:"body2",sx:{fontSize:{xs:"0.6rem",sm:"0.8rem",md:"0.8rem",lg:"0.7rem",xl:"0.8rem"}},children:r.classData.comment})})}),(0,s.jsxs)(c.Z,{variant:"body2",sx:{mt:0,textAlign:"right",fontSize:{xs:"0.6rem",sm:"0.8rem",md:"0.9rem",lg:"0.8rem",xl:"0.8rem"}},children:["登録日: ",new Date(1e3*r.classData.createdAt.seconds).toLocaleDateString()]})]})]})},t)})}),(0,s.jsxs)(C.Z,{open:P,onClose:ed,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,s.jsxs)(k.Z,{id:"alert-dialog-title",sx:{display:"flex",alignItems:"center",color:"error.main"},children:[(0,s.jsx)(z.Z,{sx:{mr:1}}),K]}),(0,s.jsx)(A.Z,{children:(0,s.jsx)(F.Z,{id:"alert-dialog-description",sx:{color:"text.primary",fontWeight:"bold"},children:"この操作は取り消せません。削除されたデータは元に戻せません。"})}),(0,s.jsxs)(D.Z,{children:[(0,s.jsx)(Z.Z,{onClick:ed,sx:{color:"text.secondary"},children:"キャンセル"}),(0,s.jsx)(Z.Z,{onClick:()=>{_&&L&&i&&(B(_,L,i),ed())},sx:{color:"error.main",fontWeight:"bold"},autoFocus:!0,children:"本当に削除する"})]})]})]})})})};t.default=()=>{let[e,t]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=(0,l.v0)(),r=(0,l.Aj)(e,e=>{e?t(e.email):t(null)});return()=>r()},[]),(0,s.jsx)("div",{children:(0,s.jsx)(W,{email:e})})}},8104:function(e,t,r){"use strict";r.d(t,{I:function(){return i},R:function(){return o}});var s=r(5236),a=r(5735),n=r(9842);let l=(0,s.ZF)({apiKey:"AIzaSyAneuAMMtbBTWg5NDCfRkVG-omGi1TEQUk",authDomain:"class-gu.firebaseapp.com",projectId:"class-gu",storageBucket:"class-gu.appspot.com",messagingSenderId:"849841337368",appId:"1:849841337368:web:22ba3476d680bc0400ff6d",measurementId:"G-1QTNC2Z9B2"}),i=(0,a.v0)(l),o=(0,n.ad)(l)}},function(e){e.O(0,[358,605,988,891,433,968,263,672,971,23,744],function(){return e(e.s=2489)}),_N_E=e.O()}]);